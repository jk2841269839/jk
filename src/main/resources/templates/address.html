<!doctype html>
<html class="no-js" lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <!--====== Title ======-->
    <title>来此购 - 大型电商平台</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style type="text/css">
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
            font-size: 14px;
        }

        #l-map {
            height: 300px;
            width: 100%;
        }

        #r-result {
            width: 100%;
        }

        .tangram-suggestion-main {
            z-index: 9999999999;
        }
    </style>

    <!--====== Favicon Icon ======-->
    <link rel="shortcut icon" th:href="@{~/assets/images/favicon.png}">

    <!--===== Vendor CSS (Bootstrap & Icon Font) =====-->
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/ionicons.min.css}">
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/fontawesome.min.css}">

    <!--===== Plugins CSS (All Plugins Files) =====-->
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/slick.css}">
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/animate.css}">
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/jquery-ui.min.css}">
    <link rel="stylesheet" th:href="@{~/assets/css/plugins/default.css}">

    <!--====== Main Style CSS ======-->
    <link rel="stylesheet" th:href="@{~/assets/css/style.css}">
    <script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=ftfGoQWFxtkUj3ujwvuxz4oKhUSWIxjb"></script>


</head>

<body>
<script type='text/javascript' src='https://ykf-webchat.7moor.com/javascripts/7moorInit.js?accessId=a8f55d20-cf05-11ea-8529-298acfcf52e1&autoShow=true&language=ZHCN' async='async'>
</script>
    <!--====== 开头加载 开始 ======-->
<header class="header-area">
    <div class="desktop-nav d-none d-lg-block">
        <div class="header-nav">
            <div class="container-fluid custom-container">
                <div class="header-nav-wrapper d-flex justify-content-between">
                    <div class="header-static-nav">
                        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text">&nbsp;&nbsp;&nbsp;</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                    </div>
                    <div class="header-menu-nav">
                        <ul class="menu-nav">
                            <li th:if="${session.operater != null}"><a th:text="${session.operater.name}" href="my-account.jsp"></a></li>
                            <li th:if="${session.operater == null}"><a th:href="@{toLogin}">登录&nbsp;&nbsp;</a></li>

                            <!-- <li><a href="login.jsp">登录&nbsp;&nbsp;</a></li> -->

                            <li><a href="wishlist.jsp"><i class="fal fa-heart"></i> 愿望单&nbsp;&nbsp;</a></li>
                            <li>
                                <div class="dropdown">
                                    <ul>
                                        <li><a th:href="showCarts">购物车&nbsp;&nbsp;</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li>
                                <div class="dropdown">
                                    <ul>
                                        <li><a onclick="selectInfo()">我的&nbsp;&nbsp;</a></li>
                                    </ul>
                                </div>
                            </li>
                            <li>
                                <div class="dropdown">
                                    <button type="button" id="langue" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="assets/images/flag/0.jpg" height="11" width="16" alt=""> 语言 <i class="icon ion-chevron-down"></i></button>

                                    <ul class="dropdown-menu" aria-labelledby="langue">
                                        <li>
                                            <a href="#"><img src="assets/images/flag/0.jpg" height="11" width="16" alt="">简体中文&nbsp;&nbsp;</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="assets/images/flag/1.jpg" alt=""> English</a>
                                        </li>
                                        <li>
                                            <a href="#"><img src="assets/images/flag/2.jpg" alt=""> Français</a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- header menu nav -->
                </div>
                <!-- header nav wrapper -->
            </div>
            <!-- container -->
        </div>
        <!-- header nav -->

        <div class="header-middle">
            <div class="container-fluid custom-container">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="header-logo-contact d-flex  ">
                            <div class="desktop-logo">
                                <a href="index.jsp">
                                    <img th:src="@{~/assets/images/logo.png}" alt="Logo">
                                </a>
                            </div>
                            <!-- desktop logo -->
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="header-search-cart  d-flex align-items-center">
                            <div class="header-contact d-flex align-items-center">
                                <i class="icon ion-ios-telephone-outline"></i>
                                <div class="phone media-body">
                                    <p>24/7 </p>
                                    <a href="tel:+48500500500">+48 500 500 500</a>
                                </div>
                            </div>
                            <div class="header-search media-body">
                                <form>
                                    <div class="search-category">
                                        <select>
                                            <option value="0" >所有分类</option>
                                            <option value="12">应用程序</option>
                                            <option value="13">游戏</option>
                                            <option value="19">海外购</option>
                                            <option value="20">图书</option>
                                            <option value="21">音乐</option>
                                            <option value="22">娱乐</option>
                                            <option value="23">音像</option>
                                            <option value="14">软件</option>
                                            <option value="24">教育音像</option>
                                            <option value="25">手机</option>
                                            <option value="26">通讯</option>
                                            <option value="27">电子</option>
                                            <option value="28">摄影</option>
                                            <option value="15">摄像</option>
                                            <option value="29">数码音影</option>
                                            <option value="30">电脑</option>
                                            <option value="31">IT</option>
                                            <option value="32">办公用品</option>
                                            <option value="33">小家电</option>
                                            <option value="16">大家电</option>
                                            <option value="34">电视</option>
                                            <option value="35">音响</option>
                                            <option value="36">家用</option>
                                            <option value="37">家居</option>
                                            <option value="38">厨具</option>
                                            <option value="17">家居装修</option>
                                            <option value="39">宠物用品</option>
                                            <option value="40">食品</option>
                                            <option value="41">酒</option>
                                            <option value="42">美容化妆</option>
                                            <option value="43">个护健康</option>
                                            <option value="18">母婴用品</option>
                                            <option value="44">玩具</option>
                                            <option value="45">运动户外休闲</option>
                                            <option value="46">服饰箱包</option>
                                            <option value="47">鞋靴</option>
                                            <option value="48">钟表</option>
                                            <option value="49">珠宝首饰</option>
                                            <option value="50">汽车用品</option>
                                            <option value="53">乐器</option>
                                            <option value="54">礼品卡</option>
                                            <option value="55">高端美容店</option>
                                        </select>
                                    </div>
                                    <input id="goodName" type="text" placeholder="搜索 &nbsp;&nbsp;&nbsp; 商品/品牌/店铺 ">
                                    <button onclick="searchGood()"><i class="icon ion-android-search"></i></button>
                                </form>
                            </div>
                            <div class="header-cart">
                                <div class="cart-btn">
                                    <a href="#">
                                        <i class="icon ion-bag"></i>
                                        <span class="text">购物车 </span>
                                        <span class="total">￥0.00</span>
                                        <span class="count">0</span>
                                    </a>
                                </div>
                                <div class="mini-cart">
                                    <ul class="cart-items">
                                        <li>
                                            <div class="single-cart-item d-flex">
                                                <div class="cart-item-thumb">
                                                    <a href="single-product.jsp"><img src="assets/images/product-cart/cart-1.jpg" alt="product"></a>
                                                    <span class="product-quantity">1x</span>
                                                </div>
                                                <div class="cart-item-content media-body">
                                                    <h5 class="product-name"><a href="single-product.jsp">New Balance Fresh Foam LAZR</a></h5>
                                                    <span class="product-price">€18.90</span>
                                                    <span class="product-color"><strong>Color:</strong> White</span>
                                                    <a href="#" class="product-close"><i class="fal fa-times"></i></a>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="single-cart-item d-flex">
                                                <div class="cart-item-thumb">
                                                    <a href="single-product.jsp"><img src="assets/images/product-cart/cart-2.jpg" alt="product"></a>
                                                    <span class="product-quantity">3x</span>
                                                </div>
                                                <div class="cart-item-content media-body">
                                                    <h5 class="product-name"><a href="single-product.jsp">New Balance Fresh Foam LAZR</a></h5>
                                                    <span class="product-price">€18.90</span>
                                                    <span class="product-color"><strong>Color:</strong> White</span>
                                                    <a href="#" class="product-close"><i class="fal fa-times"></i></a>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="price_content">
                                        <div class="cart-subtotals">
                                            <div class="products price_inline">
                                                <span class="label">Subtotal</span>
                                                <span class="value">€30.80</span>
                                            </div>
                                            <div class="shipping price_inline">
                                                <span class="label">Shipping</span>
                                                <span class="value">€7.00</span>
                                            </div>
                                            <div class="tax price_inline">
                                                <span class="label">Taxes</span>
                                                <span class="value">€0.00</span>
                                            </div>
                                        </div>
                                        <div class="cart-total price_inline">
                                            <span class="label">Total</span>
                                            <span class="value">€37.80</span>
                                        </div>
                                    </div>
                                    <!-- price content -->
                                    <div class="checkout text-center">
                                        <a href="checkout.jsp" class="main-btn">付款</a>
                                    </div>
                                </div>
                                <!-- mini cart -->
                            </div>
                        </div>
                        <!-- header search cart -->
                    </div>
                </div>
                <!-- row -->
            </div>
            <!-- container -->
        </div>
        <!-- header middle -->

        <div class="header-menu">
            <div class="container-fluid custom-container">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="header-menu-vertical">
                            <h4 class="menu-title">
                                <span>主题市场</span>
                            </h4>
                            <ul class="menu-content menu-expand">
                                <li class="menu-item">
                                    <a href="#">游戏/娱乐/乐器 <i class="fal fa-chevron-right"></i></a>
                                    <ul class="sub-menu flex-wrap">
                                        <li>
                                            <a href="#"><span>游戏电玩</span></a>
                                            <ul class="submenu-item ">
                                                <li><a href="shop-list.jsp">Nintendo Switch</a></li>
                                                <li><a href="shop-list.jsp">PlayStation 4</a></li>
                                                <li><a href="shop-list.jsp">Xbox One</a></li>
                                                <li><a href="shop-list.jsp">Alienware</a></li>
                                                <li><a href="shop-list.jsp">复古游戏机</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#"><span>视听娱乐</span></a>
                                            <ul class="submenu-item ">
                                                <li><a href="shop-list.jsp">家庭影院</a></li>
                                                <li><a href="shop-list.jsp">迷你音响</a></li>
                                                <li><a href="shop-list.jsp">回音壁</a></li>
                                                <li><a href="shop-list.jsp">功放</a></li>
                                                <li><a href="shop-list.jsp">投影机</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <img src="assets/images/banner-image.png" alt="">
                                        </li>
                                    </ul>
                                    <!-- sub menu -->
                                </li>
                                <li class="menu-item">
                                    <a href="#">服装/鞋靴/箱包<i class="fal fa-chevron-right"></i></a>
                                    <ul class="sub-menu flex-wrap">
                                        <li>
                                            <a href="#"><span>服装服饰</span></a>
                                            <ul class="submenu-item ">
                                                <li><a href="shop-list.jsp">女装</a></li>
                                                <li><a href="shop-list.jsp">男装</a></li>
                                                <li><a href="shop-list.jsp">运动</a></li>
                                                <li><a href="shop-list.jsp">童装</a></li>
                                                <li><a href="shop-list.jsp">内衣</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#"><span>鞋靴</span></a>
                                            <ul class="submenu-item ">
                                                <li><a href="shop-list.jsp">女鞋</a></li>
                                                <li><a href="shop-list.jsp">男鞋</a></li>
                                                <li><a href="shop-list.jsp">运动休闲鞋</a></li>
                                                <li><a href="shop-list.jsp">高跟鞋</a></li>
                                                <li><a href="shop-list.jsp">靴子</a></li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a href="#"><span>皮箱钱包</span></a>
                                            <ul class="submenu-item ">
                                                <li><a href="shop-list.jsp">女包</a></li>
                                                <li><a href="shop-list.jsp">男包</a></li>
                                                <li><a href="shop-list.jsp">旅行箱包</a></li>
                                                <li><a href="shop-list.jsp">健身包</a></li>
                                                <li><a href="shop-list.jsp">卡包 </a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <!-- sub menu -->
                                </li>
                                <li class="menu-item"><a id="beauty" th:href="@{getGoodList/1/5/1001/1}">美妆/个护健康</a></li>
                                <li class="menu-item"><a th:href="@{getGoodList/1/5/1002/1}">厨具/家居</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">玩具/母婴</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">电脑/办公/文具</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">运动户外</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">手机/摄影/数码</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">电子配件/智能生活</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">食品/营养品</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">家电/家装</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">钟表/首饰</a></li>
                                <li class="menu-item"><a href="shop-list.jsp">书籍/字典</a></li>
                            </ul>
                            <!-- menu content -->
                        </div>
                        <!-- header menu vertical -->
                    </div>

                    <div class="col-lg-9 position-static">
                        <div class="header-horizontal-menu">
                            <ul class="menu-content">
                                <li class="active"><a href="#">主页 <i class="fal fa-chevron-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="index.jsp">Home 01</a></li>
                                        <li><a href="index-2.jsp">Home 02</a></li>
                                        <li><a href="index-3.jsp">Home 03</a></li>
                                        <li><a href="index-4.jsp">Home 04</a></li>
                                    </ul>
                                </li>
                                <li><a href="about.jsp">关于我们</a></li>
                                <li><a href="#">页面 <i class="fal fa-chevron-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="about.jsp">关于我们</a></li>
                                        <li><a href="cart.jsp">购物车</a></li>
                                        <li><a href="checkout.jsp">支付</a></li>
                                        <!-- <li><a href="compare.jsp">Compare</a></li> -->
                                        <li><a href="wishlist.jsp">心愿单</a></li>
                                        <li><a href="my-account.jsp">我的账户</a></li>
                                    </ul>
                                </li>

                                <li class="position-static">
                                    <a href="#">客户体验 <i class="fal fa-chevron-down"></i></a>
                                    <ul class="mega-sub-menu">
                                        <li class="custom-menu">
                                            <div class="row">
                                                <div class="col-lg-4 col-md-12">
                                                    <div class="menu-block">
                                                        <h6 class="custom-title">贴心标准</h6>
                                                        <p>统一的女店员服装和配饰，从最新的时尚趋势中得到灵感</p>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-12">
                                                    <div class="menu-block">
                                                        <h6 class="custom-title">用心采集</h6>
                                                        <p>多触点收集顾客体验，提前预见市场需求</p>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4 col-md-12">
                                                    <div class="menu-block">
                                                        <h6 class="custom-title">倾心聆听</h6>
                                                        <p>以顾客反馈启动服务改进，提升顾客复购与忠诚度</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="custom-banner">
                                                <a href="shop-4-column.jsp"><img src="assets/images/custom_banner.jpg" alt="" class="img-responsive"></a>
                                            </div>
                                        </li>
                                    </ul>
                                    <!--  mega sub menu -->
                                </li>
                                <li><a href="#">博客 <i class="fal fa-chevron-down"></i></a>
                                    <ul class="sub-menu">
                                        <li><a href="#">Blog Grid <i class="fal fa-chevron-right"></i></a>
                                            <ul class="sub-menu">
                                                <li><a href="blog-grid-left-sidebar.jsp">Blog Grid Left Slider</a></li>
                                                <li><a href="blog-grid-right-sidebar.jsp">Blog Grid Right Slider</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Blog List <i class="fal fa-chevron-right"></i></a>
                                            <ul class="sub-menu">
                                                <li><a href="blog-list-left-sidebar.jsp">Blog List Left Slider</a></li>
                                                <li><a href="blog-list-right-sidebar.jsp">Blog List Right Slider</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Blog Single <i class="fal fa-chevron-right"></i></a>
                                            <ul class="sub-menu">
                                                <li><a href="blog-single-left-sidebar.jsp">Blog Single Left Slider</a></li>
                                                <li><a href="blog-single-right-sidebar.jsp">Blog Single Right Slider</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="contact.jsp">联系我们</a></li>
                            </ul>
                        </div>
                        <!-- header horizontal menu -->
                    </div>
                </div>
                <!-- row -->
            </div>
            <!-- container -->
        </div>
        <!-- header menu -->
    </div>
    <!-- desktop nav -->
</header>

    <!--====== 开头加载 结束 ======-->

    <!--====== Breadcrumb Part Start ======-->

    <div class="breadcrumb-area">
        <div class="container-fluid custom-container">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.jsp">首页</a></li>
                    <li class="breadcrumb-item active">收货地址</li>
                </ol>
            </nav>
        </div> <!-- container -->
    </div>

    <!--====== Breadcrumb Part Ends ======-->

    <!--====== Cart Part Start ======-->

    <section class="cart-page pt-10">
        <div class="container-fluid custom-container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="shopping-cart mt-25">
                        <h4 class="allup-title">收货地址</h4>
                        <div class="shopping-cart-table table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th class="checkout-checkbox">选择</th>
                                        <th class="price">收货人</th>
                                        <th class="product">详细地址</th>
                                        <th class="price">邮编</th>
                                        <th class="price">手机号</th>
                                        <th class="price">操作</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr th:each="address,iterStat:${addressList}">
                                        <td>
                                            <div class="product-price">
                                                <input type="checkbox" id="inlineCheckbox" value="option">
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-price">
                                                <span th:id="'name'+${iterStat.index}" class="price" th:text="${address.name}"></span>
                                                <span th:id="'id'+${iterStat.index}" class="price" style="display: none" th:text="${address.id}"></span>
                                            </div>
                                        </td>
                                        </td>
                                        <td>
                                            <div class="product-cart">
                                                <span th:id="'address'+${iterStat.index}" class="price" th:text="${address.address}"></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-price">
                                                <span th:id="'postcode'+${iterStat.index}" class="price" th:text="${address.postcode}"></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-price">
                                                <span th:id="'mobile'+${iterStat.index}" class="price" th:text="${address.mobile}"></span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="product-close">
                                                &nbsp;&nbsp;&nbsp;
                                                <a th:onclick="edit([[${iterStat.index}]])" data-toggle="modal" data-target="#myModal"><i class="fal fa-edit"></i></a>
                                                &nbsp;&nbsp;&nbsp;
                                                <a th:onclick="deleteAddress(this,[[${iterStat.index}]])"><i class="fal fa-trash-alt"></i></a>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="cart-btn text-right">
                            <span id="count" style="display: none">${param.count}</span>
                            <a id="checkOut" class="main-btn" href="#">付款</a>
                            <a id="addAdd" class="main-btn" data-toggle="modal" data-target="#myModal" style="color:white;">新增地址</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body" style="width: 800px; margin: 0px auto;">
                    <!-- 添加你的弹窗内容 -->
                    <div classs="container-fluid">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="my-account-details account-wrapper">
                                    <h4 id="title" class="account-title">新增地址</h4>
                                    <span id="id" style="display: none"></span>
                                    <div class="account-details">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="single-form">
                                                    <strong type="text">收货人</strong>
                                                    <input id="name" type="text" value="">
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="single-form">
                                                    <strong type="text">手机号</strong>
                                                    <input id="mobile" type="text" value="">
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="single-form">
                                                    <strong type="text">邮编</strong>
                                                    <input id="postcode" type="text" value="">
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="single-form" id="r-result">
                                                    <strong type="text">详细地址</strong>
                                                    <input id="address" type="text" value="">
                                                </div>
                                            </div>
                                            <br/><br/><br/><br/><br/>
                                            <div id="searchResultPanel" style="border:1px solid #C0C0C0;width:150px;height:auto; display:none;"></div>
                                            <div id="l-map"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 添加你的弹窗内容 -->
                </div>
                <div class="modal-footer">
                    <div>
                        <a onclick="cancelEdit()" class="btn btn-default" href="#" data-dismiss="modal">取消</a>
                        <a id="addA" onclick="addAddress()" class="btn btn-primary" href="#">添加</a>
                        <a id="edit" onclick="editAddress()" class="btn btn-primary" style="display: none" href="#">确定</a>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <!--====== Vendors js ======-->
    <script th:src="@{~/assets/js/vendor/jquery-1.12.4.min.js}"></script>
    <script th:src="@{~/assets/js/vendor/modernizr-3.7.1.min.js}"></script>

    <!--====== Plugins js ======-->
    <script th:src="@{~/assets/js/plugins/popper.min.js}"></script>
    <script th:src="@{~/assets/js/plugins/bootstrap.min.js}"></script>
    <script th:src="@{~/assets/js/plugins/slick.min.js}"></script>
    <script th:src="@{~/assets/js/plugins/jquery.countdown.min.js}"></script>
    <script th:src="@{~/assets/js/plugins/jquery-ui.min.js}"></script>

    <!--====== Main Activation js ======-->
    <script th:src="@{~/assets/js/main.js}"></script>

</body>

</html>
<script type="text/javascript">
    // 百度地图API功能
    function G(id) {
        return document.getElementById(id);
    }
    var map = new BMap.Map("l-map");
    // 初始化地图,设置城市和地图级别。
    map.centerAndZoom("北京", 12);
    //建立一个自动完成的对象
    var ac = new BMap.Autocomplete({
        "input": "address",
        "location": map
    });
    //鼠标放在下拉列表上的事件
    ac.addEventListener("onhighlight", function(e) {
        var str = "";
        var _value = e.fromitem.value;
        var value = "";
        if (e.fromitem.index > -1) {
            value = _value.province + _value.city + _value.district + _value.street + _value.business;
        }
        str = "FromItem<br />index = " + e.fromitem.index + "<br />value = " + value;

        value = "";
        if (e.toitem.index > -1) {
            _value = e.toitem.value;
            value = _value.province + _value.city + _value.district + _value.street + _value.business;
        }
        str += "<br />ToItem<br />index = " + e.toitem.index + "<br />value = " + value;
        G("searchResultPanel").innerHTML = str;
    });
    var myValue;
    //鼠标点击下拉列表后的事件
    ac.addEventListener("onconfirm", function(e) {
        var _value = e.item.value;
        myValue = _value.province + _value.city + _value.district + _value.street + _value.business;
        G("searchResultPanel").innerHTML = "onconfirm<br />index = " + e.item.index + "<br />myValue = " + myValue;

        setPlace();
    });
    function setPlace() {
        //清除地图上所有覆盖物
        map.clearOverlays();
        function myFun() {
            //获取第一个智能搜索的结果
            var pp = local.getResults().getPoi(0).point;
            // 获取搜索结果的详细地址
            let address = local.getResults().getPoi(0).address;
            // 将获取到的地址填充到表单
            // window.document.getElementById("address").value = address
            map.centerAndZoom(pp, 18);
            // 创建标注
            var marker = new BMap.Marker(pp);
            //添加标注
            map.addOverlay(marker);
            //跳动的动画
            marker.setAnimation(BMAP_ANIMATION_BOUNCE);
        }
        //智能搜索
        var local = new BMap.LocalSearch(map, {
            onSearchComplete: myFun
        });
        local.search(myValue);
    }
    // 添加购物车
    function addAddress(obj,cartId) {
        $.ajax({
            type:"POST",
            // 跳转后端 AddressHandler 中的 addAddress
            url:"/addAddress",
            data:{
                // 将 input 中用户输入的数据传到后端
                name:$("#name").val(),
                mobile:$("#mobile").val(),
                postcode:$("#postcode").val(),
                address:$("#address").val(),
                id:$("#id").text(),
            },
            // 数据传输类型
            dataType:'text',
            // ajax 回调函数，使用 ajax 异步传输后，不可以在后端 servlet 李跳转页面，只能在回调函数中跳转
            success:function (data) {
                // ** 后端 servlet 无法传参至回调，此处用 '' 代替 **
                if (data=='succeed'){
                    alert("添加成功");
                    window.location.href="/showAddress"
                }else {
                    alert("添加失败");
                }
            },
            error:function (error) {
                alert("error");
            }
        });
    }
    // 编辑购物车
    function edit(index) {
        alert(index);
        var name = "#name" + index;
        var mobile = "#mobile" + index;
        var postcode = "#postcode" + index;
        var address = "#address" + index;
        var id ="#id" + index;
        $("#title").text("编辑地址");
        $("#name").val($(name).text());
        $("#mobile").val($(mobile).text());
        $("#postcode").val($(postcode).text());
        $("#address").val($(address).text());
        $("#id").text($(id).text());
        $("#addA").hide();
        $("#edit").show();
    }
    function cancelEdit() {
        $("#title").text("新增地址");
        $("#name").val("");
        $("#mobile").val("");
        $("#postcode").val("");
        $("#address").val("");
        $("#addA").show();
        $("#edit").hide();
    }
    function editAddress() {
        $.ajax({
            type: "POST",
            // 跳转后端 AddressHandler 中的 addAddress
            url: "/editAddress",
            data: {
                // 将 input 中用户输入的数据传到后端
                name: $("#name").val(),
                mobile: $("#mobile").val(),
                postcode: $("#postcode").val(),
                address: $("#address").val(),
                id: $("#id").text(),
            },
            // 数据传输类型
            dataType: 'text',
            // ajax 回调函数，使用 ajax 异步传输后，不可以在后端 servlet 李跳转页面，只能在回调函数中跳转
            success: function (data) {
                // ** 后端 servlet 无法传参至回调，此处用 '' 代替 **
                if (data === "succeed") {
                    // 跳转到后端 showAddress
                    window.location.href = "/showAddress";
                } else {
                    alert("failed");
                }
            },
            error: function (error) {
                alert("error");
            }
        });
    }
    function deleteAddress(obj,index) {
        var id = "#id" + index;
        $.ajax({
            type: "POST",
            // 跳转后端 AddressHandler 中的 addAddress
            url: "/deleteAddress",
            data: {
                id: $(id).text()
            },
            // 数据传输类型
            dataType: 'text',
            // ajax 回调函数，使用 ajax 异步传输后，不可以在后端 servlet 李跳转页面，只能在回调函数中跳转
            success: function (data) {
                // ** 后端 servlet 无法传参至回调，此处用 '' 代替 **
                if (data === "succeed") {
                    alert("删除成功");
                    obj.parentNode.parentNode.parentNode.remove();
                } else {
                    alert("删除失败，请重试");
                }
            },
            error: function (error) {
                alert("系统错误，请重试");
            }
        });
    }
    $("#checkOut").click(function () {
        window.location.href="/pay";
    })
</script>
